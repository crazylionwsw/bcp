<div class="hbox hbox-auto-xs bg-light ">
    <div class="col lter b-l">
        <div class="vbox">
            <div class="wrapper b-b b-light">
                <div class="font-thin h4">{{title}}</div>
            </div>

            <div class="row-row">
                <div class="cell">
                    <div class="cell-inner">

                        <div class="row padder-v m-n lt">
                            <div class="col-sm-4 m-b-xs ">
                                <select class="form-control" ng-model="searchFilter.statusValue" ng-change="search()">
                                    <option value="-1">全部</option>
                                    <option value="100">待处理</option>
                                    <option value="0">待审核</option>
                                    <option value="1">审核中</option>
                                    <option value="2">审核通过</option>
                                    <option value="8">驳回待提交</option>
                                </select>
                            </div>
                            <div class="col-sm-2 text-left">
                                <select class="form-control" ng-model="pageSize" ng-change="changePageSize()">
                                    <option value="10">10</option>
                                    <option value="20">20</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                    <option value="1000">1000</option>
                                </select>
                            </div>
                            <div class="col-sm-6 m-b-xs text-right">
                                <a role="button" class="btn btn-sm btn-primary"  ng-click="showQuery()">查询</a>
                            </div>
                        </div>

                        <table class="table table-striped b-t b-light m-b-none">
                            <thead>
                            <tr>
                                <th>
                                    序号
                                </th>
                                <th>
                                    报单支行
                                </th>
                                <th>
                                    渠道支行
                                </th>
                                <th>
                                    业务类型
                                </th>
                                <th>
                                    客户姓名【身份证号码】
                                </th>
                                <th>
                                    分期经理【手机号码】
                                </th>
                                <th>
                                    缴费类型
                                </th>
                                <th>
                                    审核状态
                                </th>
                                <th>
                                    当前任务
                                </th>
                                <th>
                                    我的任务
                                </th>
                                <th>
                                    提交时间
                                </th>
                                <th>
                                    业务处理时间
                                </th>
                                <th>
                                    操作
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="paymentbill in paymentbills" ng-class="{2: 'success', 8: 'warning', 9: 'danger'}[paymentbill.approveStatus]">
                                <td>{{$index+1}}</td>
                                <td><transaction-cashsource-info ng-if="paymentbill.transaction !== undefined" transaction="paymentbill.transaction"></transaction-cashsource-info></td>
                                <td><transaction-cardealer-cooperationcashsource-info ng-if="paymentbill.transaction !== undefined" transaction="paymentbill.transaction"></transaction-cardealer-cooperationcashsource-info></td>
                                <td>{{paymentbill.businessTypeCode | BusinessTypeFilter}}</td>
                                <td><customer-info id="paymentbill.customerId"></customer-info></td>
                                <td><employee-info ng-if="paymentbill.employeeId !== undefined" id="paymentbill.employeeId"></employee-info></td>
                                <td>{{paymentbill.payContentType | PaymentBillFilter}}</td>
                                <td><approve-status ng-if="paymentbill.approveStatus != null && paymentbill.transaction !== undefined" transaction="paymentbill.transaction" status="paymentbill.approveStatus" billtypecode="paymentbill.billTypeCode"></approve-status></td>
                                <td><flow-getpresenttaskgroup billtypecode="paymentbill.billTypeCode" billid="paymentbill.id" ng-if="paymentbill.transaction !== undefined" transaction="paymentbill.transaction"></flow-getpresenttaskgroup></td>
                                <td><flow-info ng-if="paymentbill.id !== undefined"  billtypecode="paymentbill.billTypeCode" billid="paymentbill.id"></flow-info></td>
                                <td>{{paymentbill.ts | momentDate: 'YYYY-MM-DD HH:mm:ss'}}</td>
                                <td>{{paymentbill.approveDate | momentDate: 'YYYY-MM-DD HH:mm:ss'}}</td>
                                <td>
                                    <div class="btn-group dropdown" dropdown>
                                        <button class="btn btn-success btn-xs" dropdown-toggle>操作<span class="caret"></span></button>
                                        <ul class="dropdown-menu">
                                            <li><a class="blue" ng-click="edit(paymentbill, $index)" ng-show="true" href>浏览</a></li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="row b-t b-light m-n lt">
                <div class="col-sm-2 text-left">
                    <ul class="pagination ng-isolate-scope ng-valid">当前页：{{currentPage}}，总计{{totalPages}}页</ul>
                </div>
                <div class="col-sm-9 text-right">
                    <pagination max-size="10" more="true" total-items="totalItems" boundary-links="true" first-text="首页" last-text="尾页"   ng-change="changePage()"  ng-model="currentPage" items-per-page="pageSize" total-items="totalItems"  previous-text="上一页" next-text="下一页"></pagination>
                </div>
                <div class="col-sm-1 text-right"></div>
            </div>
        </div>
    </div>
</div>
<pageslide  ps-open="checked" ps-zindex="1035" ps-size="1500px" ps-body-class="true" ps-auto-close="false" ps-click-outside="false" onopen="onOpenSidePanel" onclose="onCloseSidePanel">
    <div class="hbox hbox-auto-xs bg-light ">
        <div class="col lter b-l">
            <div class="vbox">
                <div class="wrapper-sm b-t b-light text-left text-info">
                    <div class="col-sm-12">
                        <h1 class="m-n font-thin h3">缴费单--{{paymentbill.businessTypeCode |BusinessTypeFilter}}
                            <span ng-class="{1:'text-info',2: 'text-success', 8: 'text-warning', 9: 'text-danger'}[paymentbill.approveStatus]">({{paymentbill.approveStatus | approveStatusFilter}})</span>
                            <span ng-class="{11:'text-danger',16: 'text-primary'}[paymentbill.transaction.status]" ng-if="paymentbill.transaction" ng-show="paymentbill.transaction.status == 11 || paymentbill.transaction.status == 16">---{{paymentbill.transaction.status | StatusFilter}}</span>
                        </h1>
                    </div>
                </div>
                <div class="row-row">
                    <div class="cell">
                        <div class="cell-inner">
                            <div class="padder-v row m-n">
                                <div class="col-lg-9">
                                    <!--业务来源-->
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <span class="h4">来源渠道</span>
                                        </div>
                                        <div class="panel-body">
                                            <cardealer-block ng-if="paymentbill.customerTransactionId != undefined && paymentbill.carDealerId != null" id="paymentbill.carDealerId" transactionid="paymentbill.customerTransactionId"></cardealer-block>
                                        </div>
                                    </div>
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <span class="h4">贷款人身份证信息</span>
                                        </div>
                                        <div class="panel-body">
                                            <customer-base id="paymentbill.customerId"></customer-base>
                                        </div>
                                    </div>
                                    <!--贷款信息-->
                                    <div class="panel panel-primary">
                                        <div class="panel-heading">
                                            <span class="h4">贷款信息</span>
                                        </div>
                                        <div class="panel-body">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="form-group pull-in clearfix">
                                                        <customer-loan ng-if="paymentbill.customerTransactionId !== undefined" transactionid="paymentbill.customerTransactionId" billtypecode="paymentbill.billTypeCode" businesstypecode="paymentbill.businessTypeCode"></customer-loan>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--缴费信息-->
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <span class="h4">缴费信息</span>
                                            <label class="text-danger">【{{paymentbill.payContentType | PaymentBillFilter}}】</label>
                                        </div>
                                        <div class="panel-body">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="form-group pull-in clearfix">
                                                        <div class="col-lg-3">
                                                            <label>缴费时间</label>
                                                            <p class="form-control-static b-b">{{paymentbill.paymentTime}}</p>
                                                        </div>
                                                        <div class="col-lg-3">
                                                            <label>缴费方式</label>
                                                            <p class="form-control-static b-b">{{paymentbill.paymentType}}</p>
                                                        </div>
                                                        <div class="col-lg-3 has-warning">
                                                            <label>收款账户</label>
                                                            <p class="form-control-static b-b">{{paymentbill.receiptAccount.accountNumber}}</p>
                                                        </div>
                                                        <div class="col-lg-3">
                                                            <label>付款账户</label>
                                                            <p class="form-control-static b-b">{{paymentbill.paymentAccount}}</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group pull-in clearfix">
                                                        <div class="col-lg-3"  ng-if="paymentbill.payContentType == 'PLEDGEPAY'">
                                                            <label>解押费用</label>
                                                            <p class="form-control-static b-b text-danger">{{paymentbill.paymentAmount || 0 |currency:'￥'}}</p>
                                                        </div>
                                                        <div class="col-lg-3"  ng-if="paymentbill.payContentType == 'CARPAY'">
                                                            <label>缴费总额</label>
                                                            <p class="form-control-static b-b text-danger">{{paymentbill.paymentAmount || 0 |currency:'￥'}}</p>
                                                        </div>
                                                        <div class="col-lg-3" ng-if="paymentbill.payContentType == 'CARPAY'">
                                                            <label>手续费(商贷)</label>
                                                            <label ng-if="paymentbill.chargeStatus == 1" class="text-danger">【已缴】</label>
                                                            <p class="form-control-static b-b">{{paymentbill.chargeFee || 0 |currency:'￥'}}</p>
                                                        </div>
                                                        <div class="col-lg-3" ng-if="paymentbill.payContentType == 'CARPAY'">
                                                            <label>贷款服务费</label>
                                                            <label ng-if="paymentbill.loanServiceStatus == 1" class="text-danger">【已缴】</label>
                                                            <p class="form-control-static b-b">{{paymentbill.loanServiceFee || 0 |currency:'￥'}}</p>
                                                        </div>
                                                        <div class="col-lg-3" ng-repeat="pay in paymentbill.feeItemList" ng-if="paymentbill.feeItemList !== undefined" class="col-lg-3">
                                                            <label>{{pay.name}}</label>
                                                            <label ng-if="pay.isChoose == 1" class="text-danger">【已缴】</label>
                                                            <p class="form-control-static b-b">{{pay.fee || 0 |currency:'￥'}}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel panel-default">
                                        <div class="panel-heading"><span class="h4">档案资料</span></div>
                                        <div class="panel-body">
                                            <customerimage-block ng-if="paymentbill !== null" bill="paymentbill"></customerimage-block>
                                        </div>
                                    </div>
                                </div>
                                <!--右边栏-->
                                <div class="col-lg-3">
                                    <div style="position: fixed;" ng-show="checked">
                                        <div style="height:650px;overflow-y:scroll;">
                                            <!--当前业务分期经理 -->
                                            <div class="panel b-success b-light clearfix">
                                                <div class="panel-body">
                                                    <a href="" class="thumb avatar pull-left m-r">
                                                        <employee-avatar ng-if="paymentbill.employeeId !== undefined" id="paymentbill.employeeId"></employee-avatar>
                                                        <i class="on b-white bottom"></i>
                                                    </a>
                                                    <div class="clear">
                                                        <employee-info ng-if="paymentbill.employeeId !== undefined" id="paymentbill.employeeId"></employee-info>
                                                        <br/><br/>
                                                        <small class="block text-muted text-xs"><i class="icon-action-redo"></i>当前业务分期经理</small>
                                                    </div>
                                                </div>
                                            </div>

                                            <!--显示订单的签批信息-->
                                            <div class="m-b-md clearfix" ng-show="paymentbill.id != null">
                                                <signinfo-list ng-if="paymentbill.id !== undefined" id="paymentbill.id"></signinfo-list>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="wrapper-sm b-t b-light">
                    <div class="panel-body">
                        <div class="col-sm-12 text-right">
                            <sign-button ng-if="paymentbill.id && paymentbill.transaction" billid="paymentbill.id" billtypecode="paymentbill.billTypeCode" buttonshow="110" transaction="paymentbill.transaction"></sign-button>
                            <button class="btn btn-primary" type="button" ng-click="close()">关 闭</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</pageslide>

<!--             模糊查询模态框           -->
<script type="text/ng-template" id="query.html">
    <query-form search="searchFilter" query="queryBill(search)" clear="clearQuery()"></query-form>
</script>
<!--             审查、审核页面   -->
<script type="text/ng-template" id="audit.html">
    <signinfo-block sign="sign(signinfo)"></signinfo-block>
</script>
<script type="text/ng-template" id="survey.html">
    <div class="panel panel-default m-b-none">
        <div class="panel-heading">
            <span class="h4">{{modalTitle}}</span>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-lg-12">
                    <div class="form-group pull-in clearfix">
                        <div class="col-sm-4" ng-repeat="customerSurveyResult in customerSurveyResults" ng-if="customerSurveyResults !== undefined">
                            <label>{{customerSurveyResult.question.content ||""}}</label>
                            <p class="form-control-static b-b" ng-if="customerSurveyResult.question.questionType != 'checklist'">{{customerSurveyResult.answerContents}}</p>
                            <p class="form-control-static b-b" ng-if="customerSurveyResult.question.questionType == 'checklist'">
                                <span ng-repeat="answerContent in customerSurveyResult.answerContentList">
                                    {{answerContent ||""}}
                                </span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="panel-footer text-right bg-light lter">
            <button class="btn btn-warning" type="button" ng-click="cancel()">关  闭</button>
        </footer>
    </div>
</script>