<div class="hbox hbox-auto-xs bg-light ">
    <div class="col lter b-l">
        <div class="vbox">
            <div class="wrapper b-b b-light">
                <div class="font-thin h4">{{tableTitle}}</div>
            </div>

            <div class="row-row">
                <div class="cell">
                    <div class="cell-inner">

                        <div class="row padder-v m-n lt">
                            <div class="col-sm-4 m-b-xs">
                                <!--<input type="text" class="input-sm form-control" placeholder="过滤：请输入绑定时间" ng-model="key">-->
                            </div>
                            <div class="col-sm-8 m-b-xs text-right ">
                                <a role="button" class="btn btn-sm btn-primary"  ng-click="showQuery()">查询</a>
                            </div>
                        </div>

                        <table class="table table-striped b-t b-light m-b-none">
                            <thead>
                            <th data-toggle="true">
                                设备信息
                            </th>
                            <th>
                                绑定的用户信息
                            </th>
                            <th>绑定时间</th>
                            <th>
                                状态
                            </th>
                            <th>
                                操作
                            </th>
                            </thead>
                            <tbody >
                            <tr ng-repeat="terminal in terminalbinds|filter:{ts:key}|orderBy:'ts':true" ng-class="{true:'danger'}[terminal.dataStatus == 9]">
                                <td>
                                    <device-info id="terminal.terminalDeviceId"></device-info>
                                </td>
                                <td><user-info id="terminal.loginUserId"></user-info></td>
                                <td>{{terminal.ts}}</td>
                                <td>{{terminal.dataStatus|dataStatusFilter}}</td>
                                <td>
                                    <div class="btn-group dropdown" dropdown>
                                        <button class="btn btn-xs btn-success" dropdown-toggle>操作<span class="caret"></span></button>
                                        <ul class="dropdown-menu">
                                            <li> <a class="red" href ng-click="lock(terminal,$index)">
                                                    绑定
                                                </a>
                                            </li>
                                            <li><a class="red" href ng-click="discard(terminal,$index)">
                                                    解绑
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>

                    </div>
                </div>
            </div>

            <div class="m-n b-t b-light row lt">
                <div class="col-sm-4 text-left">
                    <ul class="pagination ng-isolate-scope ng-valid">当前页：{{currentPage}}，总计{{totalPages}}页</ul>
                </div>
                <div class="col-sm-8 text-right">
                    <pagination max-size="10" more="true"  boundary-links="true" first-text="首页" last-text="尾页"   ng-change="changePage()"  ng-model="currentPage" items-per-page="pageSize" total-items="totalItems"  previous-text="上一页" next-text="下一页"></pagination>
                </div>
            </div>
        </div>
    </div>
</div>

<!------输入对话框------>
<script type="text/ng-template" id="modelForm.html">
    <div class="panel panel-default m-b-none">
        <div class="panel-heading">
            <span class="h4">{{modalTitle}}</span>
        </div>
        <div class="panel-body">
            <div class="form-group">
                <label>设备名称</label>
                <input class="form-control ng-pristine ng-untouched ng-invalid ng-invalid-required ng-valid-pattern"  ng-model="terminal.deviceName" required type="text">
            </div>
            <div class="form-group">
                <!--todo:需要添加唯一性验证-->
                <label>设备序列号<em class="text-muted">(请查看设备条形码记录)</em></label>
                <input class="form-control ng-pristine ng-untouched ng-invalid ng-invalid-required ng-valid-pattern"  ng-model="terminal.serialNum" required="" type="text">
            </div>
            <div class="form-group">
                <label>终端设备类型</label>
                <input class="form-control ng-pristine ng-untouched ng-invalid ng-invalid-required ng-valid-pattern"  ng-model="terminal.deviceType" required  type="text">
            </div>
            <div class="form-group">
                <label>设备识别码</label>
                <input class="form-control ng-pristine ng-untouched ng-invalid ng-invalid-required ng-valid-pattern"  ng-model="terminal.identify" required type="text">
            </div>
            <div class="form-group">
                <label>绑定用户信息</label>
                <input class="form-control ng-pristine ng-untouched ng-invalid ng-invalid-required ng-valid-pattern"  ng-model="terminal.loginUser.username" required type="text">
            </div>
        </div>
        <footer class="panel-footer text-right bg-light lter">
            <button class="btn btn-success" type="submit" ng-click="unbind()" >解除绑定</button>
            <button class="btn btn-warning" type="button" ng-click="bind()">确认绑定</button>
            <button class="btn btn-default" type="button" ng-click="close()">关  闭</button>
        </footer>
    </div>
</script>

<script type="text/ng-template" id="query.html">
    <loginuser-query-form user="userFilter" query="queryBill(user)" clear="clearQuery()"></loginuser-query-form>
</script>