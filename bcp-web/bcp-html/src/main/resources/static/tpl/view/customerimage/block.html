<div class="form-group pull-in clearfix">
    <!--显示本单据所有的档案类型-->
    <div class="col-md-3 col-xs-6"  ng-repeat="imageType in imagetypes">
        <div class="thumbnail" tooltip="{{imageType.name}}">
            <!--如果该档案类型已经上传过图片-->
            <div ng-if="imageType.customerImage != null && imageType.customerImage.fileIds != null && imageType.customerImage.fileIds.length > 0">
                <!--显示审核意见的个数-->
                <!-- todo: 使用Popover显示审核记录-->
                <span class="badge pos-abt pull-right-xs"
                      ng-show="imageType.customerImage.signInfos.length > 0"
                      popover="I appeared on mouse enter!"
                      popover-trigger="mouseenter">
                    {{imageType.customerImage.signInfos.length}}
                </span>

                <!--只显示第一张图片做为封面-->
                <!--其它图片用lightbox打开，进行轮播-->
                <!--<a ng-click="openLightboxModal(imageType)">-->

                <element ng-if="isVideo(imageType)">
                    <video style="width:100%;height:160px;" controls="controls" ng-src="{{imageType.customerImage.coverFileId|imgsrc}}"/>
                </element>

                <element ng-if="isPDF(imageType)">
                    <a ng-click="viewPDF(imageType.customerImage.coverFileId)">
                        <img ng-src="img/pdf.png" class="img-responsive" style="height:160px;" />
                    </a>
                </element>

                <a ng-click="openViewer(imageType)" ng-if="!isVideo(imageType) && !isPDF(imageType)">
                    <img ng-src="{{imageType.customerImage.coverFileId|imgsrc}}" class="img-responsive" style="height:160px;" />
                </a>
            </div>
            <!--如果该档案类型没有上传过图片，显示默认图片-->
            <div ng-if="imageType.customerImage == null || imageType.customerImage.fileIds == null || imageType.customerImage.fileIds.length ==0">
                <!--加载该档案类型下的所有图片-->
                <!--只显示第一张图片做为封面-->
                <!--其它图片用lightbox打开，进行轮播-->
                <a><img ng-src="img/p0.jpg" class="img-responsive" style="height:160px;"/></a>
            </div>
            <div class="caption bg-white-opacity text-center text-ellipsis">
                <!--显示档案类型的名称-->
                {{imageType.name}}
            </div>
            <div class="btn-group btn-group-justified" role="group">
                <a class="btn btn-default btn-xs" ng-click="comment(imageType)" ng-show="imageType.customerImage != null && imageType.customerImage.fileIds != null && imageType.customerImage.fileIds.length > 0">备注</a>
                <!--合成档案到PDF文件-->
                <a class="btn btn-default btn-xs" ng-click="merge(imageType)" ng-show="imageType.customerImage != null && imageType.customerImage.fileIds != null && imageType.customerImage.fileIds.length > 0 && imageType.merged">合成</a>
                <!--如果该档案类型没有上传过图片，则显示上传按钮-->
                <a class="btn btn-default btn-xs" ladda="uploading==imageType" data-spinner-color="#999999" ng-click="chooseFiles(imageType)">上传</a>
                <!--删除档案-->
                <a class="btn btn-default btn-xs" ng-show="imageType.customerImage != null && imageType.customerImage.fileIds != null && imageType.customerImage.fileIds.length > 0 && imageType.customerImage.canDelete" ng-click="delete(imageType)">删除</a>
            </div>
        </div>
    </div>
    <input type="file" id="fileUploader" name="file" nv-file-select="" class="hidden" multiple uploader="fileUploader"/>
</div>

<div class="hidden" id="customerImages">
    <element ng-repeat="fileId in type.customerImage.fileIds track by $index">
        <img data-original="{{fileId|imgsrc}}" ng-src="{{fileId|imgsrc}}" alt="{{type.name}}"/>
    </element>
    <img ng-src="img/p0.jpg" class="img-responsive img-placeholder"/>
</div>

<script type="text/ng-template" id="auditCustomerImage.html">
    <div class="panel panel-default m-b-none">
        <div class="panel-heading">
            <span class="h4">{{modalTitle}}</span>
        </div>
        <div class="panel-body">
            <div class="form-group">
                <label>审批说明 </label>
                <textarea class="form-control" rows="6" data-ng-model="signinfo.comment" placeholder="输入审批备注，驳回的请输入驳回理由"></textarea>
            </div>
        </div>
        <footer class="panel-footer text-right bg-light lter">
            <button class="btn btn-primary" type="button" ng-click="reapply()">驳  回</button>
            <button class="btn btn-warning" type="button" ng-click="close()">关  闭</button>
        </footer>
    </div>
</script>

<script type="text/ng-template" id="customerContract.html">
    <div class="panel panel-default m-b-none">
        <div class="panel-heading">
            <button type="button" class="close" ng-click="close()" data-dismiss="modal" aria-label="关闭"><span aria-hidden="true">&times;</span></button>
            <span class="h4">文档</span>
        </div>
        <div class="panel-body">
           <p>该文档有旧的版本，您可以选择“直接下载”旧版本，或“重新生成”新版本！</p>
        </div>
        <footer class="panel-footer text-right bg-light lter">
            <button class="btn btn-primary" type="button" ng-click="download()">直接下载</button>
            <button class="btn btn-warning" type="button" ng-click="constraint()">重新生成</button>
        </footer>
    </div>
</script>

<!------输入对话框------>
<script type="text/ng-template" id="commentForm2.html">
    <div class="panel panel-default m-b-none">
        <div class="panel-heading">
            <span class="h4">{{modalTitle}}</span>
        </div>
        <div class="panel-body">
            <div class="form-group">
                <textarea class="form-control" rows="6" placeholder="输入备注说明" ng-model="customerImage.comment"></textarea>
            </div>
        </div>
        <footer class="panel-footer text-right bg-light lter">
            <button class="btn btn-primary" type="button"  ng-click="save()">保 存</button>
            <button class="btn btn-warning" type="button" ng-click="cancel()">取 消</button>
        </footer>
    </div>
</script>